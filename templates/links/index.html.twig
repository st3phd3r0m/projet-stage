{% extends 'base-admin.html.twig' %}

{% block title %}Ludo et Sophie - Index des liens
{% endblock %}

{% block body %}
<!-- Content Header (Page header) -->
<div class="content-header">
	<div class="container-fluid">
		<div class="row mb-2">
			<div class="col-sm-6">
				<h1 class="m-0 text-dark">Ludo et Sophie - Index des liens</h1>
			</div>
			<!-- /.col -->
			<div class="col-sm-6">
				<ol class="breadcrumb float-sm-right">
					<li class="breadcrumb-item">
						<a href="{{ path('admin') }}">Dashboard</a>
					</li>
					<li class="breadcrumb-item active">Liens</li>
				</ol>
			</div>
			<!-- /.col -->
		</div>
		<!-- /.row -->
	</div>
	<!-- /.container-fluid -->
</div>
<!-- /.content-header -->

<!-- Main content -->
<div class="content">
	<div class="container-fluid">

		{% for message in app.flashes('success') %}
			<div class="alert alert-success" role="alert">{{ message }}</div>
		{% endfor %}

		{% for message in app.flashes('fail') %}
			<div class="alert alert-warning" role="alert">{{ message }}</div>
		{% endfor %}


		<a href="{{ path('links_new') }}" class="btn btn-success my-5" >Créer nouveau lien</a>

        <table class="table">
            <thead>
                <tr>
                    <th>Url</th>
                    <th>Position</th>
                    <th>Ordre d'apparition</th>
                    <th>Type</th>
                    <th>Titre</th>
                    <th>Contenu</th>
                    <th>Icone</th>
                    <th>actions</th>
                </tr>
            </thead>
            <tbody>
            {% for link in links %}
                <tr>
                    <td>{{ link.url }}</td>
                    <td>{{ link.position }}</td>
                    <td>{{ link.positionOrder }}</td>
                    <td>{{ link.type }}</td>
                    <td>{{ link.title }}</td>
                    <td>{{ link.content|raw }}</td>
                    <td>
                    	{% if link.image is not null %}
						    <img src="{{ asset('images/icones/'~ link.image ) | imagine_filter('miniatures') }}" alt="Icone associée au lien {{ link.url }}">
					    {% else %}
							Pas d'icône associée à ce lien
						{% endif %}
					</td>
                    <td>
						<a href="{{ path('links_edit', {'id': link.id}) }}" class="btn btn-warning" ><i class="fas fa-edit"></i></a>
                        {{ include('links/_delete_form.html.twig') }}
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="4">Aucun lien enregistré</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

		<a href="{{ path('links_new') }}" class="btn btn-success my-5" >Créer nouveau lien</a>
    </div>
</div>    
{% endblock %}
